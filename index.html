<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Le Carnet Rouge</title>

    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Oswald:wght@400;700&display=swap" rel="stylesheet">
</head>

<body>

    <div id="titlePanel">
        <h1 id="mainTitle">LE CARNET<br>ROUGE</h1>
    </div>

    <div id="musicButton">
        <button id="toggleMusic">ğŸµ Play Music</button>
    </div>

    <audio id="introMusic" src="music/epic.mp3" preload="auto"></audio>

    <div id="icons">

        <div class="icon-block">
            <div class="icon-title-container">
                <span class="icon-title">L'histoire</span>
            </div>
            <img class="icon" src="asset/1.png" data-target="#panel-story">
        </div>


        <div class="icon-block">
            <div class="icon-title-container">
            <span class="icon-title">Les planches</span>
            </div>
            <img class="icon" src="asset/2.png" data-target="#panel-planches">
        </div>

        <div class="icon-block">
            <div class="icon-title-container">
            <span class="icon-title">Les personnages</span>
            </div>
            <img class="icon" src="asset/3.png" data-target="#panel-personnages">
        </div>

    </div>

    <!-- PANELS -->
    <div id="panel-story" class="panel">
        <button class="close-panel">âœ– Fermer</button>

        <div class="panel-content histoire-panel">
            <h2>Histoire</h2>
            <p>Tome 1 : Les Disparus<br>
            Dans un monde oÃ¹ la justice nâ€™est quâ€™une faÃ§ade et oÃ¹ les puissants rÃ©Ã©crivent la vÃ©ritÃ© Ã  leur convenance, Emma Sterling tente de survivre Ã  une existence qui sâ€™effondre.
            Depuis lâ€™enfance, elle a vÃ©cu dans la fuite permanente, ballotÃ©e de ville en ville par des parents qui ne lui ont jamais expliquÃ© ce quâ€™ils fuyaient. Leur mort dans un accident suspect la laisse seule, brisÃ©e, et rongÃ©e par une colÃ¨re quâ€™elle ne sait plus contenir.

            Une nuit, dans une chambre dâ€™hÃ´tel, cette colÃ¨re explose.
            Un acte irrÃ©flÃ©chi, une arrestation immÃ©diate, et la chute commence.

            Mais lors de son identification, un test ADN dÃ©clenche une alerte que personne nâ€™attendait.
            Emma nâ€™est pas une inconnue : elle est la fille dâ€™un couple autrefois liÃ© Ã  ANTICOR, un groupe dissident Ã©radiquÃ© vingt ans plus tÃ´t.
            Un couple que lâ€™Ã‰tat pensait mort sans descendance.
            Un couple dont le nom est encore murmurÃ© dans les couloirs du pouvoir.

            TransfÃ©rÃ©e vers une juridiction spÃ©ciale, Emma dÃ©couvre quâ€™elle a un oncle : Joseph Steed, dÃ©tective privÃ© rÃ©putÃ©, mais brisÃ© par lâ€™alcool et par la disparition de son frÃ¨re.
            Steed nâ€™a jamais su quâ€™il avait une niÃ¨ce.
            Il nâ€™a jamais pardonnÃ© Ã  son frÃ¨re dâ€™avoir rejoint ANTICOR.
            Et il nâ€™a jamais cessÃ© de porter la culpabilitÃ© de ne pas avoir pu le sauver.

            Le juge chargÃ© de lâ€™affaire, figure corrompue dâ€™un systÃ¨me qui Ã©touffe toute vÃ©ritÃ©, propose Ã  Steed un marchÃ© :
            la libertÃ© dâ€™Emma en Ã©change dâ€™une enquÃªte quâ€™il a toujours refusÃ©e.
            Steed dit non.
            Jusquâ€™Ã  ce que les fantÃ´mes du passÃ© le rattrapent.

            Avec lâ€™aide de La Carte, un alliÃ© insaisissable qui connaÃ®t les entrailles de la ville mieux que quiconque, Steed finit par accepter.
            Emma est libÃ©rÃ©e, mais la rencontre entre lâ€™oncle et la niÃ¨ce est glaciale.
            Deux inconnus liÃ©s par un passÃ© quâ€™on leur a volÃ©.
            Deux survivants qui nâ€™ont plus rien Ã  perdre.

            Ensemble, ils dÃ©couvrent que les parents dâ€™Emma nâ€™Ã©taient pas seulement des fugitifs :
            ils protÃ©geaient un secret capable de faire trembler lâ€™Ã©lite mondiale.
            Un secret enfermÃ© dans un objet disparu, connu sous le nom de Carnet Rouge.

            Ce premier tome suit la naissance fragile dâ€™un trio improbable, soudÃ© par la perte, la rage et un besoin viscÃ©ral de vÃ©ritÃ©.
            Au fil des pages, lâ€™enquÃªte se transforme en lutte pour la survie, et la survie en quÃªte de justice.
            Car dans lâ€™ombre, quelquâ€™un les observe.
            Quelquâ€™un sait quâ€™ils se rapprochent de ce que lâ€™Ã‰tat a passÃ© vingt ans Ã  effacer.

            Et lorsque les flammes sâ€™abattent sur la maison de Steed, une certitude sâ€™impose :
            le passÃ© nâ€™est pas mort.
            Il revient rÃ©clamer ce qui lui appartient.</p>
        </div>
    </div>

    <div id="panel-planches" class="panel">
        <button class="close-panel">âœ– Fermer</button>
        <div class="panel-content">
            <h2>Les planches</h2>
            <p class="intro-planches">
                Voici une sÃ©lection de planches issues de la bande dessinÃ©e.  
                Cliquez sur une miniature pour ouvrir le diaporama.
            </p>
            <div class="gallery">
            <img src="planches/0.jpg" class="thumb" data-index="0">
            <img src="planches/1.jpg" class="thumb" data-index="1">
            <img src="planches/2.jpg" class="thumb" data-index="2">
            <img src="planches/25.jpg" class="thumb" data-index="3">
            <img src="planches/26.jpg" class="thumb" data-index="4">
            <img src="planches/36.jpg" class="thumb" data-index="5">
        </div>

        <!-- Diaporama -->
        <div id="slideshow" class="slideshow hidden">
            <button class="nav prev">â—€</button>
            <img id="slide-image" src="">
            <button class="nav next">â–¶</button>
            <button class="back-to-thumbs">Retour aux miniatures</button>
        </div>


        </div>
    </div>

    <div id="panel-personnages" class="panel">
    <button class="close-panel">âœ– Fermer</button>

    <div class="panel-content">
        <h2>Les personnages</h2>

        <p class="intro-planches">
            Voici une sÃ©lection de personnages issus de lâ€™univers du Carnet Rouge.  
            Cliquez sur une miniature pour ouvrir le diaporama.
        </p>

        <div class="gallery">
            <img src="personnages/1.jpg" class="thumb-personnages" data-index="0">
            <img src="personnages/2.jpg" class="thumb-personnages" data-index="1">
            <img src="personnages/3.jpg" class="thumb-personnages" data-index="2">
            <img src="personnages/4.jpg" class="thumb-personnages" data-index="3">
            <img src="personnages/5.jpg" class="thumb-personnages" data-index="4">
            <img src="personnages/6.png" class="thumb-personnages" data-index="5">
        </div>

        <!-- Diaporama personnages -->
        <div id="slideshow-personnages" class="slideshow hidden">
            <button class="nav prev-personnages">â—€</button>
            <img id="slide-image-personnages" src="">
            <button class="nav next-personnages">â–¶</button>
            <button class="back-to-thumbs-personnages">Retour aux miniatures</button>
        </div>

    </div>
</div>


    <!-- SCRIPT GLOBAL -->
    <script>
    const thumbnails = document.querySelectorAll('.thumb');
    const slideshow = document.getElementById('slideshow');
    const slideImage = document.getElementById('slide-image');
    const backBtn = document.querySelector('.back-to-thumbs');
    const nextBtn = document.querySelector('.next');
    const prevBtn = document.querySelector('.prev');

    let currentIndex = 0;

    // Ouvrir le diaporama
    thumbnails.forEach(thumb => {
        thumb.addEventListener('click', () => {
            currentIndex = parseInt(thumb.dataset.index);
            showSlide();
            slideshow.classList.remove('hidden');
        });
    });

    // Afficher une image
    function showSlide() {
        const src = thumbnails[currentIndex].src;
        slideImage.src = src;
    }

    // Navigation
    nextBtn.addEventListener('click', () => {
        currentIndex = (currentIndex + 1) % thumbnails.length;
        showSlide();
    });

    prevBtn.addEventListener('click', () => {
        currentIndex = (currentIndex - 1 + thumbnails.length) % thumbnails.length;
        showSlide();
    });

    // Retour aux miniatures
    backBtn.addEventListener('click', () => {
        slideshow.classList.add('hidden');
    });

    // music
    const music = document.getElementById("introMusic");
    const musicButton = document.getElementById("toggleMusic");

    musicButton.addEventListener("click", () => {
        if (music.paused) {
            music.play();
            musicButton.textContent = "â¸ï¸ Pause";
        } else {
            music.pause();
            musicButton.textContent = "â–¶ï¸ Play";
        }
    });

    const icons = document.querySelectorAll(".icon");
    const titlePanel = document.getElementById("titlePanel");

    icons.forEach(icon => {
        icon.addEventListener("click", (e) => {
            e.preventDefault();

            const targetPanel = document.querySelector(icon.dataset.target);
            const rect = icon.getBoundingClientRect();

            // Supprimer clone existant
            const oldClone = document.querySelector(".clone-icon");
            if (oldClone) oldClone.remove();

            // Disparition titres + autres icÃ´nes
            document.querySelectorAll(".icon-block").forEach(b => b.style.opacity = 0);
            document.querySelectorAll(".icon-title").forEach(t => t.style.opacity = 0);
            document.querySelectorAll(".icon-title-container").forEach(c => c.style.opacity = 1);
            document.querySelectorAll(".icon").forEach(other => {
                if (other !== icon) other.style.opacity = 0;
            });

            // Disparition du titre principal
            titlePanel.classList.add("fade-out");

            // Clone animÃ©
            const clone = icon.cloneNode(true);
            clone.classList.add("clone-icon");
            clone.style.position = "fixed";
            clone.style.left = rect.left + "px";
            clone.style.top = rect.top + "px";
            clone.style.width = rect.width + "px";
            clone.style.height = rect.height + "px";
            clone.style.transition = "all 0.6s ease";
            clone.style.zIndex = 9999;
            clone.style.pointerEvents = "none";

            document.body.appendChild(clone);
            icon.style.opacity = "0";

            setTimeout(() => {
                clone.style.left = "50%";
                clone.style.top = "50%";
                clone.style.transform = "translate(-50%, -50%) scale(1.4)";
            }, 20);

            setTimeout(() => {
                targetPanel.classList.add("active");
            }, 650);
        });
    });

    document.querySelectorAll(".close-panel").forEach(btn => {
        btn.addEventListener("click", () => {

            document.querySelectorAll(".panel").forEach(p => p.classList.remove("active"));
            document.querySelectorAll(".icon-block").forEach(b => b.style.opacity = 1);
            document.querySelectorAll(".icon").forEach(icon => icon.style.opacity = 1);
            document.querySelectorAll(".icon-title").forEach(t => t.style.opacity = 1);

            const clone = document.querySelector(".clone-icon");
            if (clone) clone.remove();

            titlePanel.classList.remove("fade-out");
        });
    });
    </script>
    <script>
    // --- DIAPORAMA PERSONNAGES ---

    const thumbsPerso = document.querySelectorAll('.thumb-personnages');
    const slideshowPerso = document.getElementById('slideshow-personnages');
    const slideImagePerso = document.getElementById('slide-image-personnages');
    const backPerso = document.querySelector('.back-to-thumbs-personnages');
    const nextPerso = document.querySelector('.next-personnages');
    const prevPerso = document.querySelector('.prev-personnages');

    let persoIndex = 0;

    // Ouvrir le diaporama
    thumbsPerso.forEach(thumb => {
        thumb.addEventListener('click', () => {
            persoIndex = parseInt(thumb.dataset.index);
            showPersoSlide();
            slideshowPerso.classList.remove('hidden');
        });
    });

    // Afficher une image
    function showPersoSlide() {
        const src = thumbsPerso[persoIndex].src;
        slideImagePerso.src = src;
    }

    // Navigation
    nextPerso.addEventListener('click', () => {
        persoIndex = (persoIndex + 1) % thumbsPerso.length;
        showPersoSlide();
    });

    prevPerso.addEventListener('click', () => {
        persoIndex = (persoIndex - 1 + thumbsPerso.length) % thumbsPerso.length;
        showPersoSlide();
    });

    // Retour aux miniatures
    backPerso.addEventListener('click', () => {
        slideshowPerso.classList.add('hidden');
    });
    </script>

</body>
</html>
